@inherits LayoutComponentBase

@inject AutoRunService AutoRun
@inject AuthService Auth
@inject ThemeService Theme
@using HackerSimulator.Wasm.Pages

<MudThemeProvider Theme="Theme.CurrentTheme" />
<MudDialogProvider />
<MudSnackbarProvider />
<MudLayout>


    <MudMainContent>
        @Body

        @* @if (!Auth.Initialized)
        {
            <p>Loading...</p>
        }
        else if (!Auth.HasUsers)
        {
            <Welcome />
        }
        else if (!Auth.IsAuthenticated)
        {
            <Login />
        }
        else
        {
            <Desktop />
            <Taskbar />
        } *@
    </MudMainContent>
</MudLayout>




@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            Auth.OnAuthInitialised += (s,e) =>
        {
            StateHasChanged();
        };
           
            await AutoRun.StartAsync();
        }
    }
}

