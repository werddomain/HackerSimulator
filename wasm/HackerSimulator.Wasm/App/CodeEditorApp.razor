@namespace HackerSimulator.Wasm.Apps
@inherits HackerSimulator.Wasm.Windows.WindowBase

@using BlazorMonaco
@using BlazorMonaco.Editor
@using BlazorMonaco.Languages

<div class="code-editor-layout">
    <div class="activity-bar">
        <button class="activity-btn">üìÅ</button>
        <button class="activity-btn">üîç</button>
        <button class="activity-btn">üêû</button>
    </div>
    <div class="editor-shell">
        <div class="sidebar">
            <FileTree RootPath="/home/user" OnFileSelected="OpenFile" />
        </div>
        <div class="editor-pane">
            <div class="tab-bar">
                @foreach (var tab in _tabs)
                {
                    <div class="tab @(tab == _activeTab ? "active" : null)" @onclick="() => Activate(tab)">
                        <span class="tab-name">@System.IO.Path.GetFileName(tab.Path)</span>
                        @if (tab.IsDirty)
                        {
                            <span class="dirty">‚óè</span>
                        }
                        <button class="close-tab" @onclick="(e) => Close(tab)" @onclick:stopPropagation="true">x</button>
                    </div>
                }
            </div>
            @if (_activeTab != null)
            {
                <StandaloneCodeEditor class="editor"
                              @ref="_editor"
                              ConstructionOptions="_editorOptions"
                              
                              Value=""
                              Language="_activeTab.Language"
                              Theme="vs-dark"
                              OnDidChangeModelContent="EditorChanged" />
            }
            else
            {
                <div class="no-file">Open a file to start editing</div>
            }
            <div class="terminal-panel">
                <Terminal />
            </div>
        </div>
    </div>
</div>
